<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кейс Т—Ж: Таргет вызова попапов по потоку или тегу (+ защита от наложения попапов)</title>
    <script>
      (function (window, document, dataLayerName, containerID) {
          window[dataLayerName] = window[dataLayerName] || [];
          window[dataLayerName].push({ 'start': new Date().getTime(), event: 'actm-js' });
          var firstScript = document.getElementsByTagName('script')[0];
          var script = document.createElement('script');
          var dl = dataLayerName !== 'acDataLayer' ? '&l=' + dataLayerName : '';
          script.async = true;
          script.src = 'https://pxl.ru.altkraft.com/actm/js/actm.js?id=' + containerID + dl;
          script.type = 'module';
          if (firstScript && firstScript.parentNode) {
              firstScript.parentNode.insertBefore(script, firstScript);
          }
      }(window, document, 'acDataLayer', 'ATM-5s7HbJcJpvkUEZlxk'));
    </script>
</head>
<body>
    <h1>Кейс Т—Ж: Таргет вызова попапов по потоку или тегу (+ защита от наложения попапов)</h1>
    <p>Test 1</p>
  <script>


if (localStorage.getItem('articleFlowsSlug')) {
    window.articleData.articleFlowsSlug = JSON.parse(localStorage.getItem('articleFlowsSlug'));
}



function toggleFlow(flowSlug) {

    localStorage.setItem('articleFlowsSlug', JSON.stringify(window.articleData.articleFlowsSlug));
window.articleData = {
    articleFlowsSlug: ["business-russia", "taxes-and-recoupments"]
};
    
    const index = window.articleData.articleFlowsSlug.indexOf(flowSlug);
    
    if (index === -1) {

        window.articleData.articleFlowsSlug.push(flowSlug);
    } else {

        window.articleData.articleFlowsSlug.splice(index, 1);
    }
    

    location.reload();
}


document.addEventListener('DOMContentLoaded', function() {

    const btn1 = document.createElement('button');
    btn1.textContent = 'Toggle business-russia';
    btn1.style.margin = '5px';
    btn1.onclick = () => toggleFlow('business-russia');
    

    const btn2 = document.createElement('button');
    btn2.textContent = 'Toggle taxes-and-recoupments';
    btn2.style.margin = '5px';
    btn2.onclick = () => toggleFlow('taxes-and-recoupments');
    

    document.body.prepend(btn1, btn2);
    

    const info = document.createElement('div');
    info.innerHTML = `Текущие потоки: ${window.articleData.articleFlowsSlug.join(', ')}`;
    info.style.margin = '10px';
    info.style.padding = '10px';
    info.style.border = '1px solid #ccc';
    document.body.prepend(info);
});
</script>

</body>
</html>

